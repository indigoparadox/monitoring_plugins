#!/bin/bash
# ntfy

NTFY_URL="$NOTIFY_PARAMETER_1"
NTFY_USER="$NOTIFY_PARAMETER_2"
NTFY_PASS="$NOTIFY_PARAMETER_3"

function ntfy_notif() {
   NTFY_MSG=$1
   curl -u "$NTFY_USER:$NTFY_PASS" -d "$NTFY_MSG" $NTFY_URL
   echo
}

if [ "$NOTIFY_WHAT" == "SERVICE" ]; then
	ntfy_notif "Check_MK Service $NOTIFY_HOSTNAME $NOTIFY_SERVICEDESC: $NOTIFY_SHORTDATETIME $NOTIFY_NOTIFICATIONTYPE $NOTIFY_SERVICESTATE: $NOTIFY_SERVICEOUTPUT" 
else
	ntfy_notif "Check_MK Host $NOTIFY_HOSTNAME: $NOTIFY_SHORTDATETIME $NOTIFY_NOTIFICATIONTYPE $NOTIFY_HOSTSTATE: $NOTIFY_HOSTOUTPUT"
fi

